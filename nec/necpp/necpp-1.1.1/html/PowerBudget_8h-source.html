<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>nec++: PowerBudget.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">src</a></div>
<h1>PowerBudget.h</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">        Copyright (C) 2004  Timothy C.A. Molteno</span>
00003 <span class="comment">        </span>
00004 <span class="comment">        This program is free software; you can redistribute it and/or modify</span>
00005 <span class="comment">        it under the terms of the GNU General Public License as published by</span>
00006 <span class="comment">        the Free Software Foundation; either version 2 of the License, or</span>
00007 <span class="comment">        (at your option) any later version.</span>
00008 <span class="comment">        </span>
00009 <span class="comment">        This program is distributed in the hope that it will be useful,</span>
00010 <span class="comment">        but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00011 <span class="comment">        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00012 <span class="comment">        GNU General Public License for more details.</span>
00013 <span class="comment">        </span>
00014 <span class="comment">        You should have received a copy of the GNU General Public License</span>
00015 <span class="comment">        along with this program; if not, write to the Free Software</span>
00016 <span class="comment">        Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00017 <span class="comment">*/</span>
00018 <span class="preprocessor">#ifndef __PowerBudget__</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#define __PowerBudget__</span>
00020 <span class="preprocessor"></span>
00021 <span class="preprocessor">#include &lt;vector&gt;</span>
00022 <span class="preprocessor">#include "BaseInput.h"</span>
00023 
00024 <span class="comment">/*</span>
00025 <span class="comment">                        ---------- POWER BUDGET ---------</span>
00026 <span class="comment">                        INPUT POWER   =  3.3203E-05 Watts</span>
00027 <span class="comment">                        RADIATED POWER=  3.3203E-05 Watts</span>
00028 <span class="comment">                        STRUCTURE LOSS=  0.0000E+00 Watts</span>
00029 <span class="comment">                        NETWORK LOSS  =  0.0000E+00 Watts</span>
00030 <span class="comment">                        EFFICIENCY    =  100.00 Percent</span>
00031 <span class="comment">*/</span>
00032 <span class="keyword">class </span>PowerBudget : <span class="keyword">public</span> BaseInput
00033 {
00034 <span class="keyword">public</span>: 
00035         vector&lt;double&gt; input_power, radiated_power, structure_loss, network_loss, efficiency;
00036         <span class="keywordtype">long</span> n_items;
00037         
00038         <span class="keywordtype">double</span> get_power_line(istream&amp; if1)
00039         {
00040                 string line = readline(if1);
00041                 <span class="comment">// delete up to '=' character (+1 includes the = character)</span>
00042                 line.erase(0, line.find(<span class="stringliteral">"="</span>,0) + 1);
00043                 stringstream ss(line);
00044                 <span class="keywordtype">double</span> ret = read_fixed(ss);
00045                 <span class="keywordflow">return</span> ret;
00046         }
00047         
00048         PowerBudget(istream&amp; if1)
00049         {
00050                 n_items = 0;
00051                 string searchString(<span class="stringliteral">"POWER BUDGET"</span>);
00052                 <span class="keywordflow">while</span> (if1.good())
00053                 {
00054                 string line = readline(if1);
00055 
00056                 <span class="keywordflow">if</span> (line.find(searchString,0) != string::npos)
00057                 {
00058                         {
00059                                 <span class="keywordtype">double</span> p = get_power_line(if1);
00060                                 input_power.push_back(p);
00061                         }
00062                         {
00063                                 <span class="keywordtype">double</span> p = get_power_line(if1);
00064                                 radiated_power.push_back(p);
00065                         }
00066                         {
00067                                 <span class="keywordtype">double</span> p = get_power_line(if1);
00068                                 structure_loss.push_back(p);
00069                         }
00070                         {
00071                                 <span class="keywordtype">double</span> p = get_power_line(if1);
00072                                 network_loss.push_back(p);
00073                         }
00074                         {
00075                                 <span class="keywordtype">double</span> p = get_power_line(if1);
00076                                 efficiency.push_back(p);
00077                         }
00078                         n_items++;
00079                 }       
00080                 }
00081         }
00082 
00083         <span class="keywordtype">bool</span> equalto(<span class="keyword">const</span> PowerBudget&amp; pb)
00084         {
00085                 <span class="keywordflow">if</span> (difference(pb) &gt; 1e-4)
00086                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00087 
00088                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00089         }
00090 
00091         <span class="keywordtype">double</span> difference(<span class="keyword">const</span> PowerBudget&amp; pb)
00092         {
00093                 <span class="keywordtype">double</span> ret = 0;
00094 
00095                 <span class="keywordflow">if</span> (n_items != pb.n_items)
00096                         <span class="keywordflow">return</span> 1.0;
00097 
00098                 <span class="keywordflow">try</span>
00099                 {
00100                 <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i=0; i&lt;n_items; i++)
00101                 {
00102                         ret += diff(pb.input_power[i],input_power[i]);
00103                         ret += diff(pb.radiated_power[i],radiated_power[i]);
00104                         ret += diff(pb.structure_loss[i],structure_loss[i]);
00105                         ret += diff(pb.network_loss[i],network_loss[i]);
00106                         ret += diff(pb.efficiency[i],efficiency[i]);
00107                 }
00108                 }
00109                 <span class="keywordflow">catch</span>(string message)
00110                 {
00111                         cout &lt;&lt; <span class="stringliteral">"diff : "</span> &lt;&lt; message &lt;&lt; endl;
00112                 }
00113                 <span class="keywordflow">return</span> ret;
00114         };
00115 };
00116 
00117 <span class="preprocessor">#endif </span><span class="comment">/* __PowerBudget__ */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Nov 23 11:15:17 2004 for nec++ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
